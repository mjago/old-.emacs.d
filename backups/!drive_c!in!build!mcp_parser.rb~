
class McpParser
  def self.extract_source
    @parse_files = false
    @source_files = []
    File.open('base_tft.mcp') do |f|
      # iterate through each line...
      f.each_line do |line|
        if line =~ /^\[FILE_INFO\]/
          @parse_files = true
        end
        if @parse_files
          if line =~ /^file_[0-9][0-9][0-9]=/
            @source_files << line.gsub(/^file_[0-9][0-9][0-9]=/,'').gsub("\n",'')
          end
        else
          @parse_files = false
        end
      end
    end
  @source_files   
  end
end

if __FILE__ == $0
  source_files = McpParser.extract
  puts source_files.inspect
end
