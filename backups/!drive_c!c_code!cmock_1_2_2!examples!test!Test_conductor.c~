#include "unity.h"
#include "Types.h"
#include "Types.h"
#include "conductor.h"
#include "MockAdcModel.h"
#include "MockAdcHardware.h"

void setUp(void)
{
}

void tearDown(void)
{
}

void test_adc_conductor_init_should_call_hardware_and_software_init(void)
{
  hardware_init_Expect();
  AdcConductor_Init();
}

void test_adc_conductor_init_should_call_software_init(void)
{
  software_init_Expect(2);
  AdcConductor_Init();
}


//void test_AdcConductor_Init_should_call_hardware_init(void)
//{
////  AdcHardware_Init_Expect();
////  AdcConductor_Init();
//}

void testRunShouldNotDoAnythingIfItIsNotTime(void)
{
  AdcModel_DoGetSample_ExpectAndReturn(FALSE);

  AdcConductor_Run();
}

void testRunShouldNotPassAdcResultToModelIfSampleIsNotComplete(void)
{
  AdcModel_DoGetSample_ExpectAndReturn(TRUE);
  AdcHardware_GetSampleComplete_ExpectAndReturn(FALSE);

  AdcConductor_Run();
}

void testRunShouldGetLatestSampleFromAdcAndPassItToModelAndStartNewConversionWhenItIsTime(void)
{
  AdcModel_DoGetSample_ExpectAndReturn(TRUE);
  AdcHardware_GetSampleComplete_ExpectAndReturn(TRUE);
  AdcHardware_GetSample_ExpectAndReturn(293U);
  AdcModel_ProcessInput_Expect(293U);
  AdcHardware_StartConversion_Expect();

  AdcConductor_Run();
}
