
ROOT_DIR = File.expand_path(File.join(File.dirname(__FILE__),'..','..'))

class GenerateStateMachine
  TARGET_PROCESSORS = ['primary','secondary','GUI']
  
  def initialize(name,processor)
    @name = name
    @processor = processor
    if @name == nil or @processor == nil
      p "USAGE # rake generate:state_machine name=main processor=primary"
      exit 1
    end
    
    check_state_name(name)
    check_target_processor(processor)
    write_detail_to_screen(name,processor)
  end    

  def check_state_name name
    if not name.class == String
      puts "\nERROR! State Machine name must be a string"
    end
    
    if not name.size >= 3
      puts "\nERROR! State Machine name must have a minimum length of 3 characters"
      exit 1
    end
  end
  
  def check_target_processor processor
    if not TARGET_PROCESSORS.include?(processor)
      puts "\nERROR! Processor must be one of... "
      TARGET_PROCESSORS.each do |tp|
        puts "  #{tp}"
      end
      puts
      exit 1
    end
  end
  def write_detail_to_screen name, processor
    puts
    puts "state machine name will be #{@name}"
    puts
    puts "target processor will be #{@processor}"
  end    
    
end



